<script>
function submitForm() {
    const nickname = document.getElementById("nickname").value.trim();
    const answer = document.getElementById("answer").value.trim();
    const resultDiv = document.getElementById("result");

    // ğŸ’¡ ê´€ë¦¬ì í‚¤ì›Œë“œ ë° ë‹‰ë„¤ì„ ì„¤ì •
    const adminKeyword = "ë‚˜ëŠ”ì•„ì´ì—”í‹°í”¼íˆ¬ë°ì´ì˜ëŒ€ì¥ì´ë‹¤";
    const adminNickname = "ê´€ë¦¬ì";

    // ğŸ’¡ ì œí•œ í‚¤ì›Œë“œ ëª©ë¡
    const restrictedNames = ["ìš´ì˜ì", "ê´€ë¦¬ì", "admin", "tester", "test", "administrator"];

    // 1. ë‹µë³€ ê¸¸ì´ ê²€ì‚¬ (ê´€ë¦¬ì í‚¤ì›Œë“œ ì˜ˆì™¸ ì²˜ë¦¬)
    if (answer.trim() !== adminKeyword) {
        if (!answer || answer.length < 50) {Â 
            resultDiv.style.color = "red";
            resultDiv.innerHTML = "ë‹µë³€ì€ ìµœì†Œ 50ì ì´ìƒ!";
            return;
        }
    }
    
    // 2. ë‹‰ë„¤ì„ ìœ íš¨ì„± ê²€ì‚¬
    if (!nickname) {
        resultDiv.style.color = "red";
        resultDiv.innerHTML = "ë‹‰ë„¤ì„ì„ ì™œ ì•ˆ ì ëŠ”ê°€ ìë„¤";
        return;
    }

    // 3. ë‹‰ë„¤ì„ ì œí•œ ê²€ì‚¬
    const isRestricted = restrictedNames.some(keyword => nickname.toLowerCase().includes(keyword.toLowerCase()));
    
    // ê´€ë¦¬ì ì ‘ì† ì¡°ê±´ì„ ì œì™¸í•˜ê³  ì œí•œ
    const isAdminAttempt = (answer.trim() === adminKeyword && nickname.trim() === adminNickname);
    
    if (isRestricted && !isAdminAttempt) {
        resultDiv.style.color = "red";
        resultDiv.innerHTML = "í•´ë‹¹ ë‹‰ë„¤ì„ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì„ íƒí•´ ì£¼ì‹­ì‹œì˜¤.";
        return;
    }

    let finalNickname = nickname;
    let postContent = answer;
    
    // 4. ê´€ë¦¬ì ì ‘ì† ì¡°ê±´ í™•ì¸ ë° ë°ì´í„° ì²˜ë¦¬
    if (isAdminAttempt) {
        localStorage.setItem("isAdminMode", "true");
        finalNickname = adminNickname;
        postContent = "INTP today ê´€ë¦¬ìê°€ ë“±ì¥í–ˆìŠµë‹ˆë‹¤."; // ê´€ë¦¬ì ê²Œì‹œê¸€ ë‚´ìš© ë³€ê²½
        resultDiv.innerHTML = `**ê´€ë¦¬ì ëª¨ë“œ**ë¡œ ì ‘ì†í•©ë‹ˆë‹¤. ì ì‹œ í›„ ì…ì¥í•©ë‹ˆë‹¤...`;
    } else {
        localStorage.removeItem("isAdminMode"); // ì¼ë°˜ ì ‘ì† ì‹œ í”Œë˜ê·¸ ì œê±°
        resultDiv.style.color = "green";
        resultDiv.innerHTML = `${nickname}ë‹˜ì˜ ë‹µë³€ ì—…ë¡œë“œ ì¤‘(ëŒì´í‚¬ ìˆ˜ ì—†ìŒ). ì ì‹œ í›„ ì…ì¥í•©ë‹ˆë‹¤...`;
    }

    // 5. ë¡œì»¬ ì €ì¥ì†Œì— ë°ì´í„° ì €ì¥
    localStorage.setItem("nickname", finalNickname);Â 
    localStorage.setItem("newPostContent", postContent);Â 
    
    // 6. ì»¤ë®¤ë‹ˆí‹° í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
    setTimeout(() => {
        window.location.href = "community.html";Â 
    }, 1000);Â 
}
</script>
